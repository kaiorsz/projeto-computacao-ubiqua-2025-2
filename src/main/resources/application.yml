spring:
  application:
    name: hemograma-ubiquo
  
  # Configura��o do banco de dados H2 (para desenvolvimento)
  datasource:
    url: jdbc:h2:mem:hemograma_db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password: 
  
  # Configura��o do JPA/Hibernate
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true
  
  # Console do H2 (apenas para desenvolvimento)
  h2:
    console:
      enabled: true
      path: /h2-console
      settings:
        web-allow-others: true
  
  # Configura��o do Jackson para JSON
  jackson:
    serialization:
      write-dates-as-timestamps: false
    default-property-inclusion: non_null

# Configura��o do servidor
server:
  port: 8081
  servlet:
    context-path: /hemograma-api

# Configura��o do Swagger/OpenAPI
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    operations-sorter: method
    tags-sorter: alpha
  show-actuator: false

# Configura��o de logging
logging:
  level:
    br.ufg.inf.hemograma: DEBUG
    org.springframework.web: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Configura��es espec�ficas da aplica��o
app:
  hemograma:
    # Valores de refer�ncia para an�lise (conforme especifica��o do projeto)
    valores-referencia:
      leucocitos:
        minimo: 4000.0
        maximo: 11000.0
        unidade: "/�L"
      hemoglobina:
        minimo: 12.0
        maximo: 17.5
        unidade: "g/dL"
      plaquetas:
        minimo: 150000.0
        maximo: 450000.0
        unidade: "/�L"
      hematocrito:
        minimo: 36.0
        maximo: 52.0
        unidade: "%"
    
    # Configura��es para an�lise coletiva
    analise-coletiva:
      janela-deslizante-horas: 24
      limite-alertas-criticos: 5
      percentual-desvio-critico: 50.0
    
    # Configura��es FHIR
    fhir:
      server-url: "http://localhost:8080/fhir"
      subscription-endpoint: "/Subscription"
      observation-endpoint: "/Observation"
      timeout-seconds: 30

# Configura��o de seguran�a (b�sica para desenvolvimento)
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when_authorized
